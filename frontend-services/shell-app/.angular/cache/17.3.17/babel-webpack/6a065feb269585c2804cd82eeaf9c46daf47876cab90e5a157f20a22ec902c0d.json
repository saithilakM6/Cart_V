{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/order.service\";\nimport * as i2 from \"../../services/product.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction OrdersComponent_div_18_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵelement(1, \"img\", 46);\n    i0.ɵɵelementStart(2, \"div\", 47)(3, \"h6\", 48);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 17);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", item_r1.image, i0.ɵɵsanitizeUrl)(\"alt\", item_r1.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"Qty: \", item_r1.quantity, \" \\u2022 \\u20B9\", item_r1.price, \" each\");\n  }\n}\nfunction OrdersComponent_div_18_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 49);\n    i0.ɵɵelement(1, \"i\", 50);\n    i0.ɵɵtext(2, \"Rate & Review \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrdersComponent_div_18_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 51);\n    i0.ɵɵlistener(\"click\", function OrdersComponent_div_18_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const order_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.cancelOrder(order_r3.id));\n    });\n    i0.ɵɵelement(1, \"i\", 52);\n    i0.ɵɵtext(2, \"Cancel Order \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrdersComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"div\", 15)(3, \"h6\", 16);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 17);\n    i0.ɵɵelement(6, \"i\", 18);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"span\", 19);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 20)(11, \"div\", 9)(12, \"div\", 21)(13, \"div\", 22);\n    i0.ɵɵtemplate(14, OrdersComponent_div_18_div_14_Template, 7, 5, \"div\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 24)(16, \"div\", 25)(17, \"h5\", 26);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 27)(20, \"button\", 28);\n    i0.ɵɵelement(21, \"i\", 29);\n    i0.ɵɵtext(22, \"Track Order \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"button\", 30);\n    i0.ɵɵelement(24, \"i\", 31);\n    i0.ɵɵtext(25, \"View Invoice \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, OrdersComponent_div_18_button_26_Template, 3, 0, \"button\", 32)(27, OrdersComponent_div_18_button_27_Template, 3, 0, \"button\", 33);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(28, \"div\", 34)(29, \"h6\", 35);\n    i0.ɵɵtext(30, \"Order Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 36)(32, \"div\", 37)(33, \"div\", 38);\n    i0.ɵɵelement(34, \"i\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"div\", 40);\n    i0.ɵɵtext(36, \"Placed\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(37, \"div\", 41);\n    i0.ɵɵelementStart(38, \"div\", 37)(39, \"div\", 38);\n    i0.ɵɵelement(40, \"i\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"div\", 40);\n    i0.ɵɵtext(42, \"Confirmed\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(43, \"div\", 41);\n    i0.ɵɵelementStart(44, \"div\", 37)(45, \"div\", 38);\n    i0.ɵɵelement(46, \"i\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"div\", 40);\n    i0.ɵɵtext(48, \"Packed\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(49, \"div\", 41);\n    i0.ɵɵelementStart(50, \"div\", 37)(51, \"div\", 38);\n    i0.ɵɵelement(52, \"i\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"div\", 40);\n    i0.ɵɵtext(54, \"Out for Delivery\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(55, \"div\", 41);\n    i0.ɵɵelementStart(56, \"div\", 37)(57, \"div\", 38);\n    i0.ɵɵelement(58, \"i\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"div\", 40);\n    i0.ɵɵtext(60, \"Delivered\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const order_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Order #\", order_r3.id, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Placed on \", order_r3.date, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(\"bg-\" + ctx_r3.getStatusColor(order_r3.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", order_r3.status, \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", order_r3.items);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", order_r3.total, \"\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", order_r3.status === \"DELIVERED\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.canCancel(order_r3.status));\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"completed\", true);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"active\", order_r3.timeline.confirmed);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"completed\", order_r3.timeline.confirmed);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"active\", order_r3.timeline.packed);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"completed\", order_r3.timeline.packed);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"active\", order_r3.timeline.shipped);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"completed\", order_r3.timeline.shipped);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"active\", order_r3.timeline.delivered);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"completed\", order_r3.timeline.delivered);\n  }\n}\nfunction OrdersComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 53);\n    i0.ɵɵelement(1, \"i\", 54);\n    i0.ɵɵelementStart(2, \"h4\");\n    i0.ɵɵtext(3, \"No orders found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 17);\n    i0.ɵɵtext(5, \"You haven't placed any orders yet\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"a\", 55);\n    i0.ɵɵtext(7, \"Start Shopping\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let OrdersComponent = /*#__PURE__*/(() => {\n  class OrdersComponent {\n    constructor(orderService, productService) {\n      this.orderService = orderService;\n      this.productService = productService;\n      this.orders = [];\n      this.filteredOrders = [];\n      this.statusFilter = '';\n      this.isLoading = true;\n    }\n    ngOnInit() {\n      this.loadOrders();\n    }\n    loadOrders() {\n      this.isLoading = true;\n      this.orderService.getUserOrders().subscribe({\n        next: orders => {\n          if (orders && Array.isArray(orders)) {\n            const productRequests = orders.flatMap(order => order.items?.map(item => this.productService.getProductById(item.productId)) || []);\n            if (productRequests.length > 0) {\n              forkJoin(productRequests).subscribe({\n                next: products => {\n                  let productIndex = 0;\n                  this.orders = orders.map(order => ({\n                    id: order.id,\n                    date: order.createdAt,\n                    status: order.status,\n                    total: order.totalAmount,\n                    items: order.items?.map(item => {\n                      const product = products[productIndex++];\n                      return {\n                        name: item.productName,\n                        quantity: item.quantity,\n                        price: item.price,\n                        image: product?.imageUrl || ''\n                      };\n                    }) || [],\n                    timeline: {\n                      confirmed: ['CONFIRMED', 'PROCESSING', 'SHIPPED', 'DELIVERED'].includes(order.status),\n                      packed: ['PROCESSING', 'SHIPPED', 'DELIVERED'].includes(order.status),\n                      shipped: ['SHIPPED', 'DELIVERED'].includes(order.status),\n                      delivered: order.status === 'DELIVERED'\n                    }\n                  }));\n                  this.filterOrders();\n                  this.isLoading = false;\n                },\n                error: error => {\n                  console.error('Error loading products:', error);\n                  this.isLoading = false;\n                }\n              });\n            } else {\n              this.orders = [];\n              this.filterOrders();\n              this.isLoading = false;\n            }\n          } else {\n            this.orders = [];\n            this.filterOrders();\n            this.isLoading = false;\n          }\n        },\n        error: error => {\n          console.error('Error loading orders:', error);\n          this.orders = [];\n          this.filterOrders();\n          this.isLoading = false;\n        }\n      });\n    }\n    filterOrders() {\n      if (this.statusFilter) {\n        this.filteredOrders = this.orders.filter(order => order.status === this.statusFilter);\n      } else {\n        this.filteredOrders = this.orders;\n      }\n    }\n    getStatusColor(status) {\n      switch (status) {\n        case 'DELIVERED':\n          return 'success';\n        case 'SHIPPED':\n          return 'warning';\n        case 'CONFIRMED':\n        case 'PROCESSING':\n          return 'info';\n        case 'CANCELLED':\n          return 'danger';\n        case 'PENDING':\n          return 'secondary';\n        default:\n          return 'secondary';\n      }\n    }\n    getStatusLabel(status) {\n      const labels = {\n        'PENDING': 'Pending',\n        'CONFIRMED': 'Confirmed',\n        'PROCESSING': 'Processing',\n        'SHIPPED': 'Out for Delivery',\n        'DELIVERED': 'Delivered',\n        'CANCELLED': 'Cancelled'\n      };\n      return labels[status] || status;\n    }\n    canCancel(status) {\n      return ['PENDING', 'CONFIRMED', 'PROCESSING'].includes(status);\n    }\n    cancelOrder(orderId) {\n      if (confirm('Are you sure you want to cancel this order?')) {\n        this.orderService.cancelOrder(orderId).subscribe({\n          next: () => {\n            alert('Order cancelled successfully');\n            this.loadOrders();\n          },\n          error: error => {\n            console.error('Error cancelling order:', error);\n            alert('Error cancelling order');\n          }\n        });\n      }\n    }\n    static {\n      this.ɵfac = function OrdersComponent_Factory(t) {\n        return new (t || OrdersComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.ProductService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: OrdersComponent,\n        selectors: [[\"app-orders\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 20,\n        vars: 3,\n        consts: [[1, \"container\", \"my-4\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"order-filters\"], [1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"DELIVERED\"], [\"value\", \"SHIPPED\"], [\"value\", \"PROCESSING\"], [\"value\", \"CANCELLED\"], [1, \"row\"], [1, \"col-12\"], [\"class\", \"card mb-3 order-card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center py-5 no-orders\", 4, \"ngIf\"], [1, \"card\", \"mb-3\", \"order-card\"], [1, \"card-header\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"order-header-info\"], [1, \"mb-0\", \"order-id\"], [1, \"text-muted\"], [1, \"bi\", \"bi-calendar\", \"me-1\"], [1, \"badge\", \"order-status\"], [1, \"card-body\"], [1, \"col-md-8\"], [1, \"order-items\"], [\"class\", \"d-flex align-items-center mb-2 order-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"text-end\"], [1, \"order-total\"], [1, \"text-success\", \"mb-3\"], [1, \"order-actions\"], [1, \"btn\", \"btn-sm\", \"btn-outline-success\", \"mb-1\", \"action-btn\"], [1, \"bi\", \"bi-truck\", \"me-1\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"mb-1\", \"action-btn\"], [1, \"bi\", \"bi-file-earmark-text\", \"me-1\"], [\"class\", \"btn btn-sm btn-outline-warning mb-1 action-btn\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-outline-danger mb-1 action-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"mt-4\", \"order-timeline\"], [1, \"timeline-title\"], [1, \"timeline-container\"], [1, \"timeline-step\"], [1, \"timeline-icon\"], [1, \"bi\", \"bi-check\"], [1, \"timeline-label\"], [1, \"timeline-connector\"], [1, \"bi\", \"bi-box\"], [1, \"bi\", \"bi-truck\"], [1, \"bi\", \"bi-house\"], [1, \"d-flex\", \"align-items-center\", \"mb-2\", \"order-item\"], [1, \"me-3\", \"rounded\", \"item-image\", 3, \"src\", \"alt\"], [1, \"item-details\"], [1, \"mb-0\", \"item-name\"], [1, \"btn\", \"btn-sm\", \"btn-outline-warning\", \"mb-1\", \"action-btn\"], [1, \"bi\", \"bi-star\", \"me-1\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"mb-1\", \"action-btn\", 3, \"click\"], [1, \"bi\", \"bi-x-circle\", \"me-1\"], [1, \"text-center\", \"py-5\", \"no-orders\"], [1, \"bi\", \"bi-bag-x\", \"fa-4x\", \"text-muted\", \"mb-3\"], [\"routerLink\", \"/products\", 1, \"btn\", \"btn-success\"]],\n        template: function OrdersComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3, \"My Orders\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2)(5, \"select\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function OrdersComponent_Template_select_ngModelChange_5_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.statusFilter, $event) || (ctx.statusFilter = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function OrdersComponent_Template_select_change_5_listener() {\n              return ctx.filterOrders();\n            });\n            i0.ɵɵelementStart(6, \"option\", 4);\n            i0.ɵɵtext(7, \"All Orders\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"option\", 5);\n            i0.ɵɵtext(9, \"Delivered\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"option\", 6);\n            i0.ɵɵtext(11, \"Out for Delivery\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"option\", 7);\n            i0.ɵɵtext(13, \"Processing\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"option\", 8);\n            i0.ɵɵtext(15, \"Cancelled\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(16, \"div\", 9)(17, \"div\", 10);\n            i0.ɵɵtemplate(18, OrdersComponent_div_18_Template, 61, 27, \"div\", 11)(19, OrdersComponent_div_19_Template, 8, 0, \"div\", 12);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.statusFilter);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filteredOrders);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.filteredOrders.length === 0);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, RouterLink, FormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n        styles: [\".order-filters[_ngcontent-%COMP%]{width:200px}.order-card[_ngcontent-%COMP%]{border:none;box-shadow:0 2px 4px #0000001a;border-radius:10px;transition:all .3s ease}.order-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.order-header-info[_ngcontent-%COMP%]   .order-id[_ngcontent-%COMP%]{color:#333;font-weight:600}.order-status[_ngcontent-%COMP%]{font-size:.8rem;padding:.5rem 1rem}.order-item[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #f0f0f0}.order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-image[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover}.item-name[_ngcontent-%COMP%]{color:#333;font-weight:500}.order-total[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:700}.action-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.25rem;font-size:.875rem;border-radius:6px}.order-timeline[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1.5rem;border-radius:8px;margin-top:1rem}.timeline-title[_ngcontent-%COMP%]{color:#333;font-weight:600;margin-bottom:1.5rem}.timeline-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:relative}.timeline-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;z-index:2}.timeline-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#e9ecef;color:#6c757d;display:flex;align-items:center;justify-content:center;margin-bottom:.5rem;transition:all .3s ease}.timeline-step.completed[_ngcontent-%COMP%]   .timeline-icon[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.timeline-label[_ngcontent-%COMP%]{font-size:.8rem;color:#6c757d;text-align:center;font-weight:500}.timeline-step.completed[_ngcontent-%COMP%]   .timeline-label[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.timeline-connector[_ngcontent-%COMP%]{flex:1;height:2px;background-color:#e9ecef;margin:0 1rem;position:relative;top:-20px}.timeline-connector.active[_ngcontent-%COMP%]{background-color:#28a745}.no-orders[_ngcontent-%COMP%]{padding:4rem 0}h2[_ngcontent-%COMP%]{color:#333;font-weight:700}.form-select[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ddd}.form-select[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 0 .2rem #28a74540}@media (max-width: 768px){.timeline-container[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.timeline-connector[_ngcontent-%COMP%]{width:2px;height:30px;margin:0;top:0}.action-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.375rem .75rem}}\"]\n      });\n    }\n  }\n  return OrdersComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}