{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cart.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/product.service\";\nimport * as i4 from \"../../services/auth.service\";\nimport * as i5 from \"../../services/wishlist.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nconst _c0 = a0 => [\"/products\", a0];\nconst _c1 = (a0, a1) => ({\n  \"btn-danger\": a0,\n  \"btn-outline-danger\": a1\n});\nconst _c2 = (a0, a1) => ({\n  \"bi-heart-fill\": a0,\n  \"bi-heart\": a1\n});\nfunction ProductsComponent_div_54_div_1_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_div_54_div_1_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const product_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.toggleWishlist(product_r2));\n    });\n    i0.ɵɵelement(1, \"i\", 49);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c1, ctx_r2.wishlistService.isInWishlist(product_r2.id), !ctx_r2.wishlistService.isInWishlist(product_r2.id)));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(5, _c2, ctx_r2.wishlistService.isInWishlist(product_r2.id), !ctx_r2.wishlistService.isInWishlist(product_r2.id)));\n  }\n}\nfunction ProductsComponent_div_54_div_1_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_div_54_div_1_button_19_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const product_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.addToCart(product_r2));\n    });\n    i0.ɵɵelement(1, \"i\", 51);\n    i0.ɵɵtext(2, \" Add to Cart \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductsComponent_div_54_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"div\", 34);\n    i0.ɵɵelement(2, \"img\", 35);\n    i0.ɵɵelementStart(3, \"div\", 36)(4, \"h5\", 37);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 38);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 39);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 40)(12, \"div\", 41)(13, \"span\", 42);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, ProductsComponent_div_54_div_1_button_15_Template, 2, 8, \"button\", 43);\n    i0.ɵɵelementStart(16, \"span\", 44);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 45);\n    i0.ɵɵtemplate(19, ProductsComponent_div_54_div_1_button_19_Template, 3, 0, \"button\", 46);\n    i0.ɵɵelementStart(20, \"a\", 47);\n    i0.ɵɵtext(21, \" View Details \");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", product_r2.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", product_r2.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 10, product_r2.category));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r2.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", product_r2.price, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.authService.isAuthenticated());\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.unit);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.authService.isAdmin());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c0, product_r2.id));\n  }\n}\nfunction ProductsComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, ProductsComponent_div_54_div_1_Template, 22, 14, \"div\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filteredProducts);\n  }\n}\nfunction ProductsComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵelement(1, \"i\", 53);\n    i0.ɵɵelementStart(2, \"h4\");\n    i0.ɵɵtext(3, \"No products found\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 25);\n    i0.ɵɵtext(5, \"Try adjusting your filters or search terms\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let ProductsComponent = /*#__PURE__*/(() => {\n  class ProductsComponent {\n    constructor(cartService, route, productService, authService, wishlistService) {\n      this.cartService = cartService;\n      this.route = route;\n      this.productService = productService;\n      this.authService = authService;\n      this.wishlistService = wishlistService;\n      this.products = [];\n      this.filteredProducts = [];\n      this.selectedCategory = '';\n      this.maxPrice = 50000;\n      this.searchTerm = '';\n    }\n    ngOnInit() {\n      this.route.queryParams.subscribe(params => {\n        if (params['category']) {\n          this.selectedCategory = params['category'];\n          this.loadProductsByCategory(params['category']);\n        } else {\n          this.loadProducts();\n        }\n      });\n    }\n    loadProducts() {\n      console.log('Loading all products...');\n      this.productService.getAllProducts().subscribe({\n        next: products => {\n          console.log('Received products:', products?.length || 0);\n          this.products = products || [];\n          this.filteredProducts = [...this.products];\n          this.filterProducts();\n        },\n        error: error => {\n          console.error('Error loading products from API:', error);\n          this.products = [];\n          this.filteredProducts = [];\n        }\n      });\n    }\n    loadProductsByCategory(category) {\n      console.log('Loading products for category:', category);\n      this.productService.getProductsByCategory(category).subscribe({\n        next: products => {\n          console.log('Received category products:', products?.length || 0);\n          this.products = products || [];\n          this.filteredProducts = [...this.products];\n        },\n        error: error => {\n          console.error('Error loading products by category:', error);\n          this.loadProducts(); // Fallback to all products\n        }\n      });\n    }\n    filterProducts() {\n      this.filteredProducts = this.products.filter(product => {\n        const matchesCategory = !this.selectedCategory || product.category === this.selectedCategory;\n        const matchesPrice = product.price <= this.maxPrice;\n        const matchesSearch = !this.searchTerm || product.name.toLowerCase().includes(this.searchTerm.toLowerCase());\n        return matchesCategory && matchesPrice && matchesSearch;\n      });\n    }\n    clearFilters() {\n      this.selectedCategory = '';\n      this.maxPrice = 50000;\n      this.searchTerm = '';\n      this.filterProducts();\n    }\n    addToCart(product) {\n      this.cartService.addToCart(product);\n    }\n    toggleWishlist(product) {\n      if (!this.authService.isAuthenticated()) {\n        alert('Please login to add items to wishlist');\n        return;\n      }\n      if (this.wishlistService.isInWishlist(product.id)) {\n        this.wishlistService.removeFromWishlist(product.id).subscribe({\n          next: () => this.wishlistService.loadWishlist()\n        });\n      } else {\n        this.wishlistService.addToWishlist(product.id).subscribe({\n          next: () => this.wishlistService.loadWishlist()\n        });\n      }\n    }\n    static {\n      this.ɵfac = function ProductsComponent_Factory(t) {\n        return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.AuthService), i0.ɵɵdirectiveInject(i5.WishlistService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ProductsComponent,\n        selectors: [[\"app-products\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 56,\n        vars: 7,\n        consts: [[1, \"container\", \"my-4\"], [1, \"row\"], [1, \"col-md-3\"], [1, \"card\", \"filters-card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"mb-3\"], [1, \"form-label\"], [1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"fruits\"], [\"value\", \"vegetables\"], [\"value\", \"dairy\"], [\"value\", \"bakery\"], [\"value\", \"electronics\"], [\"value\", \"sports\"], [\"value\", \"kids\"], [\"value\", \"beauty\"], [\"value\", \"mens-clothing\"], [\"value\", \"womens-clothing\"], [\"value\", \"kids-clothing\"], [\"type\", \"range\", \"min\", \"0\", \"max\", \"50000\", 1, \"form-range\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"btn\", \"btn-outline-secondary\", \"btn-sm\", 3, \"click\"], [1, \"col-md-9\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [1, \"text-muted\"], [1, \"input-group\", \"search-box\"], [\"type\", \"text\", \"placeholder\", \"Search products...\", 1, \"form-control\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"btn\", \"btn-outline-success\"], [1, \"bi\", \"bi-search\"], [\"class\", \"row\", 4, \"ngIf\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [\"class\", \"col-md-4 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card\", \"h-100\", \"product-card\"], [1, \"card-img-top\", 2, \"height\", \"200px\", \"object-fit\", \"cover\", 3, \"src\", \"alt\"], [1, \"card-body\", \"d-flex\", \"flex-column\"], [1, \"card-title\"], [1, \"card-text\", \"text-muted\"], [1, \"card-text\"], [1, \"mt-auto\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\"], [1, \"h5\", \"text-success\", \"mb-0\"], [\"class\", \"btn btn-sm\", 3, \"ngClass\", \"click\", 4, \"ngIf\"], [1, \"badge\", \"bg-light\", \"text-dark\"], [1, \"d-grid\", \"gap-2\"], [\"class\", \"btn btn-success\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-outline-primary\", 3, \"routerLink\"], [1, \"btn\", \"btn-sm\", 3, \"click\", \"ngClass\"], [1, \"bi\", 3, \"ngClass\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"bi\", \"bi-cart-plus\"], [1, \"text-center\", \"py-5\"], [1, \"bi\", \"bi-search\", \"fa-4x\", \"text-muted\", \"mb-3\"]],\n        template: function ProductsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\");\n            i0.ɵɵtext(6, \"Filters\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"label\", 7);\n            i0.ɵɵtext(10, \"Category\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"select\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ProductsComponent_Template_select_ngModelChange_11_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.selectedCategory, $event) || (ctx.selectedCategory = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function ProductsComponent_Template_select_change_11_listener() {\n              return ctx.filterProducts();\n            });\n            i0.ɵɵelementStart(12, \"option\", 9);\n            i0.ɵɵtext(13, \"All Categories\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"option\", 10);\n            i0.ɵɵtext(15, \"Fruits\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"option\", 11);\n            i0.ɵɵtext(17, \"Vegetables\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"option\", 12);\n            i0.ɵɵtext(19, \"Dairy\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"option\", 13);\n            i0.ɵɵtext(21, \"Bakery\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"option\", 14);\n            i0.ɵɵtext(23, \"Electronics\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"option\", 15);\n            i0.ɵɵtext(25, \"Sports\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"option\", 16);\n            i0.ɵɵtext(27, \"Kids\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"option\", 17);\n            i0.ɵɵtext(29, \"Beauty\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"option\", 18);\n            i0.ɵɵtext(31, \"Men's Clothing\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"option\", 19);\n            i0.ɵɵtext(33, \"Women's Clothing\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"option\", 20);\n            i0.ɵɵtext(35, \"Kids Clothing\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(36, \"div\", 6)(37, \"label\", 7);\n            i0.ɵɵtext(38, \"Price Range\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"input\", 21);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ProductsComponent_Template_input_ngModelChange_39_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.maxPrice, $event) || (ctx.maxPrice = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function ProductsComponent_Template_input_input_39_listener() {\n              return ctx.filterProducts();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"small\");\n            i0.ɵɵtext(41);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(42, \"button\", 22);\n            i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_42_listener() {\n              return ctx.clearFilters();\n            });\n            i0.ɵɵtext(43, \"Clear Filters\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(44, \"div\", 23)(45, \"div\", 24)(46, \"h2\");\n            i0.ɵɵtext(47, \"Products \");\n            i0.ɵɵelementStart(48, \"span\", 25);\n            i0.ɵɵtext(49);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(50, \"div\", 26)(51, \"input\", 27);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ProductsComponent_Template_input_ngModelChange_51_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchTerm, $event) || (ctx.searchTerm = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function ProductsComponent_Template_input_input_51_listener() {\n              return ctx.filterProducts();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(52, \"button\", 28);\n            i0.ɵɵelement(53, \"i\", 29);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(54, ProductsComponent_div_54_Template, 2, 1, \"div\", 30)(55, ProductsComponent_div_55_Template, 6, 0, \"div\", 31);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(11);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedCategory);\n            i0.ɵɵadvance(28);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.maxPrice);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"Up to \\u20B9\", ctx.maxPrice, \"\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵtextInterpolate1(\"(\", ctx.filteredProducts.length, \")\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchTerm);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.filteredProducts.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.filteredProducts.length === 0);\n          }\n        },\n        dependencies: [CommonModule, i6.NgClass, i6.NgForOf, i6.NgIf, i6.TitleCasePipe, RouterLink, FormsModule, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.RangeValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgModel],\n        styles: [\".filters-card[_ngcontent-%COMP%]{position:sticky;top:20px;border:none;box-shadow:0 2px 4px #0000001a}.search-box[_ngcontent-%COMP%]{width:300px}.form-range[_ngcontent-%COMP%]{margin-bottom:.5rem}.form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #ddd}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#28a745;box-shadow:0 0 0 .2rem #28a74540}h2[_ngcontent-%COMP%]{font-weight:700;color:#333}.text-muted[_ngcontent-%COMP%]{font-weight:400}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#ddd;color:#666}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#ddd;color:#666}\"]\n      });\n    }\n  }\n  return ProductsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}