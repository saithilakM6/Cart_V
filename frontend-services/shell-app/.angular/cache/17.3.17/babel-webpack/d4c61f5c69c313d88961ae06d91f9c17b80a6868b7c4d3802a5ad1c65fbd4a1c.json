{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cart.service\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"../../services/payment.service\";\nimport * as i4 from \"../../services/coupon.service\";\nimport * as i5 from \"../../services/address.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\nconst _c0 = (a0, a1) => ({\n  \"text-success\": a0,\n  \"text-danger\": a1\n});\nfunction CheckoutComponent_div_10_div_4_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 52);\n    i0.ɵɵtext(1, \"Default\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CheckoutComponent_div_10_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"div\", 47);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_10_div_4_Template_div_click_1_listener() {\n      const addr_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.selectAddress(addr_r3.id));\n    });\n    i0.ɵɵelementStart(2, \"div\", 48)(3, \"div\", 49);\n    i0.ɵɵelement(4, \"input\", 50);\n    i0.ɵɵelementStart(5, \"label\", 14)(6, \"strong\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"small\", 16);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"small\", 16);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, CheckoutComponent_div_10_div_4_span_12_Template, 2, 0, \"span\", 51);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const addr_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"selected\", ctx_r3.selectedAddressId === addr_r3.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"checked\", ctx_r3.selectedAddressId === addr_r3.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(addr_r3.fullName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(addr_r3.phone);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\"\", addr_r3.line1, \", \", addr_r3.city, \", \", addr_r3.state, \" \", addr_r3.pincode, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", addr_r3.isDefault);\n  }\n}\nfunction CheckoutComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"h6\");\n    i0.ɵɵtext(2, \"Saved Addresses\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵtemplate(4, CheckoutComponent_div_10_div_4_Template, 13, 10, \"div\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 44);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_10_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.useNewAddress());\n    });\n    i0.ɵɵelement(6, \"i\", 45);\n    i0.ɵɵtext(7, \" Add New Address \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"hr\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.savedAddresses);\n  }\n}\nfunction CheckoutComponent_div_11_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 64)(1, \"input\", 65);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_div_33_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r3.saveThisAddress, $event) || (ctx_r3.saveThisAddress = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 14);\n    i0.ɵɵtext(3, \" Save this address for future orders \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.saveThisAddress);\n  }\n}\nfunction CheckoutComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", null, 0)(3, \"div\", 2)(4, \"div\", 46)(5, \"label\", 53);\n    i0.ɵɵtext(6, \"Full Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 54);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.fullName, $event) || (ctx_r3.address.fullName = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 46)(9, \"label\", 53);\n    i0.ɵɵtext(10, \"Phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 55);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.phone, $event) || (ctx_r3.address.phone = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 56)(13, \"label\", 53);\n    i0.ɵɵtext(14, \"Address Line 1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"input\", 57);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.line1, $event) || (ctx_r3.address.line1 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 56)(17, \"label\", 53);\n    i0.ɵɵtext(18, \"Address Line 2 (Optional)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"input\", 58);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_19_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.line2, $event) || (ctx_r3.address.line2 = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 2)(21, \"div\", 59)(22, \"label\", 53);\n    i0.ɵɵtext(23, \"City\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"input\", 60);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_24_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.city, $event) || (ctx_r3.address.city = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\", 59)(26, \"label\", 53);\n    i0.ɵɵtext(27, \"State\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"input\", 61);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.state, $event) || (ctx_r3.address.state = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 59)(30, \"label\", 53);\n    i0.ɵɵtext(31, \"PIN Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"input\", 62);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_11_Template_input_ngModelChange_32_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.address.pincode, $event) || (ctx_r3.address.pincode = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(33, CheckoutComponent_div_11_div_33_Template, 4, 1, \"div\", 63);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.fullName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.phone);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.line1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.line2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.city);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.state);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.address.pincode);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.showAddressForm || ctx_r3.savedAddresses.length === 0);\n  }\n}\nfunction CheckoutComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 66)(1, \"div\", 56)(2, \"label\", 53);\n    i0.ɵɵtext(3, \"UPI ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 67);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_div_39_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r3 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r3.upiId, $event) || (ctx_r3.upiId = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"small\", 68);\n    i0.ɵɵtext(6, \"Example: yourname@paytm, yourname@googlepay, yourname@phonepe\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r3.upiId);\n  }\n}\nfunction CheckoutComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 69)(1, \"div\", 2)(2, \"div\", 46)(3, \"label\", 53);\n    i0.ɵɵtext(4, \"Card Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 70);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 46)(7, \"label\", 53);\n    i0.ɵɵtext(8, \"Cardholder Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"input\", 71);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 2)(11, \"div\", 46)(12, \"label\", 53);\n    i0.ɵɵtext(13, \"Expiry Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 72);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 46)(16, \"label\", 53);\n    i0.ɵɵtext(17, \"CVV\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 73);\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction CheckoutComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 74)(1, \"div\", 75)(2, \"span\", 76);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"small\", 16);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"span\", 77);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Qty: \", item_r8.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", item_r8.price * item_r8.quantity, \"\");\n  }\n}\nfunction CheckoutComponent_button_52_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 78);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_button_52_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.applyCoupon());\n    });\n    i0.ɵɵtext(1, \"Apply\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", !ctx_r3.couponCode.trim());\n  }\n}\nfunction CheckoutComponent_button_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 79);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_button_53_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.removeCoupon());\n    });\n    i0.ɵɵtext(1, \"Remove\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CheckoutComponent_small_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 80);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, ctx_r3.couponApplied, !ctx_r3.couponApplied));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r3.couponMessage);\n  }\n}\nfunction CheckoutComponent_div_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 81)(1, \"span\");\n    i0.ɵɵtext(2, \"Coupon Discount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"-\\u20B9\", ctx_r3.couponDiscount, \"\");\n  }\n}\nfunction CheckoutComponent_span_80_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 82);\n  }\n}\nexport let CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(cartService, orderService, paymentService, couponService, addressService, router) {\n      this.cartService = cartService;\n      this.orderService = orderService;\n      this.paymentService = paymentService;\n      this.couponService = couponService;\n      this.addressService = addressService;\n      this.router = router;\n      this.address = {\n        fullName: '',\n        phone: '',\n        line1: '',\n        line2: '',\n        city: '',\n        state: '',\n        pincode: ''\n      };\n      this.savedAddresses = [];\n      this.selectedAddressId = null;\n      this.showAddressForm = false;\n      this.saveThisAddress = false;\n      this.paymentMethod = '';\n      this.upiId = '';\n      this.orderItems = [];\n      this.subtotal = 0;\n      this.deliveryFee = 30;\n      this.tax = 0;\n      this.total = 0;\n      this.isProcessing = false;\n      this.order = null;\n      this.couponCode = '';\n      this.couponDiscount = 0;\n      this.couponApplied = false;\n      this.couponMessage = '';\n    }\n    ngOnInit() {\n      this.cartService.cartItems$.subscribe(items => {\n        this.orderItems = items;\n        this.calculateTotals();\n      });\n      this.addressService.addresses$.subscribe(addresses => {\n        this.savedAddresses = addresses;\n        if (addresses.length > 0 && !this.selectedAddressId) {\n          const defaultAddr = this.addressService.getDefaultAddress();\n          if (defaultAddr) {\n            this.selectAddress(defaultAddr.id);\n          }\n        }\n      });\n    }\n    calculateTotals() {\n      this.subtotal = this.orderItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n      this.tax = Math.round(this.subtotal * 0.05);\n      this.total = this.subtotal + this.deliveryFee + this.tax - this.couponDiscount;\n    }\n    applyCoupon() {\n      if (!this.couponCode.trim()) {\n        this.couponMessage = 'Please enter a coupon code';\n        return;\n      }\n      console.log('Applying coupon:', this.couponCode, 'Amount:', this.subtotal);\n      this.couponService.validateCoupon(this.couponCode, this.subtotal).subscribe({\n        next: response => {\n          console.log('Coupon response:', response);\n          if (response.valid) {\n            this.couponDiscount = response.discount;\n            this.couponApplied = true;\n            this.couponMessage = `Coupon applied! Discount: ₹${response.discount}`;\n            this.calculateTotals();\n          } else {\n            this.couponMessage = response.message || 'Invalid coupon code';\n            this.couponApplied = false;\n            this.couponDiscount = 0;\n          }\n        },\n        error: error => {\n          console.error('Coupon error:', error);\n          this.couponMessage = error.error?.message || 'Error validating coupon';\n          this.couponApplied = false;\n          this.couponDiscount = 0;\n        }\n      });\n    }\n    removeCoupon() {\n      this.couponCode = '';\n      this.couponDiscount = 0;\n      this.couponApplied = false;\n      this.couponMessage = '';\n      this.calculateTotals();\n    }\n    selectAddress(addressId) {\n      this.selectedAddressId = addressId;\n      const selected = this.savedAddresses.find(addr => addr.id === addressId);\n      if (selected) {\n        this.address = {\n          ...selected\n        };\n        this.showAddressForm = false;\n      }\n    }\n    useNewAddress() {\n      this.selectedAddressId = null;\n      this.address = {\n        fullName: '',\n        phone: '',\n        line1: '',\n        line2: '',\n        city: '',\n        state: '',\n        pincode: ''\n      };\n      this.showAddressForm = true;\n    }\n    saveAddress() {\n      if (this.saveThisAddress && this.address.fullName && this.address.phone && this.address.line1) {\n        this.addressService.saveAddress(this.address).subscribe({\n          next: () => {\n            this.addressService.loadAddresses();\n            this.saveThisAddress = false;\n          },\n          error: error => console.error('Error saving address:', error)\n        });\n      }\n    }\n    placeOrder() {\n      if (!this.paymentMethod || this.paymentMethod.trim() === '') {\n        alert('Please select a payment method');\n        return;\n      }\n      if (!this.address.fullName || !this.address.phone || !this.address.line1) {\n        alert('Please fill in all required address fields');\n        return;\n      }\n      if (this.paymentMethod === 'upi' && !this.upiId) {\n        alert('Please enter your UPI ID');\n        return;\n      }\n      if (this.orderItems.length === 0) {\n        alert('Your cart is empty');\n        return;\n      }\n      console.log('Starting order placement...');\n      console.log('Order items:', this.orderItems);\n      console.log('Total:', this.total);\n      console.log('Payment method:', this.paymentMethod);\n      this.isProcessing = true;\n      // Save address if requested\n      this.saveAddress();\n      const fullAddress = `${this.address.line1}, ${this.address.line2}, ${this.address.city}, ${this.address.state} ${this.address.pincode}`;\n      console.log('Full address:', fullAddress);\n      this.orderService.createOrder(fullAddress, this.address.phone, this.orderItems, this.total, this.paymentMethod.toUpperCase()).subscribe({\n        next: response => {\n          console.log('Order created successfully:', response);\n          this.order = response;\n          this.processPayment();\n        },\n        error: error => {\n          console.error('Error creating order:', error);\n          console.error('Error details:', error.error);\n          console.error('Error status:', error.status);\n          alert('Error creating order: ' + (error.error?.message || error.message || 'Please try again.'));\n          this.isProcessing = false;\n        }\n      });\n    }\n    processPayment() {\n      if (!this.order) return;\n      if (this.paymentMethod === 'cod') {\n        this.completeOrder(0);\n        return;\n      }\n      // Razorpay integration\n      const options = {\n        key: 'rzp_test_Rp922yQaqHsoA8',\n        amount: this.total * 100,\n        currency: 'INR',\n        name: 'RevCart',\n        description: `Order #${this.order.orderNumber}`,\n        handler: response => {\n          console.log('Payment successful:', response);\n          this.completeOrder(response.razorpay_payment_id);\n        },\n        prefill: {\n          name: this.address.fullName,\n          contact: this.address.phone\n        },\n        theme: {\n          color: '#D6A99D'\n        },\n        modal: {\n          ondismiss: () => {\n            this.isProcessing = false;\n            alert('Payment cancelled');\n          }\n        }\n      };\n      const rzp = new window.Razorpay(options);\n      rzp.open();\n    }\n    completeOrder(paymentId) {\n      console.log('Completing order:', this.order);\n      this.cartService.clearCart();\n      alert(`Order placed successfully! Order ID: ${this.order.id}`);\n      this.router.navigate(['/orders']);\n      this.isProcessing = false;\n    }\n    static {\n      this.ɵfac = function CheckoutComponent_Factory(t) {\n        return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.PaymentService), i0.ɵɵdirectiveInject(i4.CouponService), i0.ɵɵdirectiveInject(i5.AddressService), i0.ɵɵdirectiveInject(i6.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CheckoutComponent,\n        selectors: [[\"app-checkout\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 86,\n        vars: 21,\n        consts: [[\"addressForm\", \"ngForm\"], [1, \"container\", \"my-4\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"card\", \"mb-4\", \"address-card\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"card-body\"], [\"class\", \"saved-addresses mb-4\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"card\", \"payment-card\"], [1, \"payment-options\"], [1, \"form-check\", \"mb-3\", \"payment-option\"], [\"type\", \"radio\", \"name\", \"paymentMethod\", \"value\", \"cod\", 1, \"form-check-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-check-label\"], [1, \"bi\", \"bi-cash-coin\", \"me-2\"], [1, \"text-muted\", \"d-block\"], [\"type\", \"radio\", \"name\", \"paymentMethod\", \"value\", \"upi\", 1, \"form-check-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"bi\", \"bi-phone\", \"me-2\"], [\"type\", \"radio\", \"name\", \"paymentMethod\", \"value\", \"card\", 1, \"form-check-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"bi\", \"bi-credit-card\", \"me-2\"], [\"class\", \"upi-details mt-4\", 4, \"ngIf\"], [\"class\", \"card-details mt-4\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"card\", \"order-summary\"], [1, \"order-items\"], [\"class\", \"d-flex justify-content-between align-items-center mb-2 order-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"coupon-section\", \"mb-3\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Try: SAVE10, WELCOME20, BIGDEAL\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"class\", \"btn btn-outline-secondary\", \"type\", \"button\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-outline-danger\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"d-block mt-1\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"summary-row\", \"d-flex\", \"justify-content-between\", \"mb-2\"], [\"class\", \"summary-row d-flex justify-content-between mb-2 text-success\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-between\", \"fw-bold\", \"fs-5\", \"total-row\"], [1, \"d-grid\", \"mt-4\"], [1, \"btn\", \"btn-success\", \"btn-lg\", 3, \"click\", \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-2\", 4, \"ngIf\"], [1, \"text-center\", \"mt-3\"], [1, \"text-muted\"], [1, \"bi\", \"bi-shield-check\", \"me-1\"], [1, \"saved-addresses\", \"mb-4\"], [\"class\", \"col-md-6 mb-3\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"btn-sm\", 3, \"click\"], [1, \"bi\", \"bi-plus\"], [1, \"col-md-6\", \"mb-3\"], [1, \"card\", \"address-option\", 3, \"click\"], [1, \"card-body\", \"p-3\"], [1, \"form-check\"], [\"type\", \"radio\", \"readonly\", \"\", 1, \"form-check-input\", 3, \"checked\"], [\"class\", \"badge bg-primary mt-1\", 4, \"ngIf\"], [1, \"badge\", \"bg-primary\", \"mt-1\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"fullName\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"tel\", \"name\", \"phone\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"mb-3\"], [\"type\", \"text\", \"name\", \"line1\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"line2\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"col-md-4\", \"mb-3\"], [\"type\", \"text\", \"name\", \"city\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"state\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"pincode\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"form-check mt-3\", 4, \"ngIf\"], [1, \"form-check\", \"mt-3\"], [\"type\", \"checkbox\", \"name\", \"saveAddress\", 1, \"form-check-input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"upi-details\", \"mt-4\"], [\"type\", \"text\", \"placeholder\", \"yourname@upi\", \"name\", \"upiId\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"text-muted\", \"d-block\", \"mt-1\"], [1, \"card-details\", \"mt-4\"], [\"type\", \"text\", \"placeholder\", \"1234 5678 9012 3456\", \"maxlength\", \"19\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"John Doe\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"MM/YY\", \"maxlength\", \"5\", 1, \"form-control\"], [\"type\", \"text\", \"placeholder\", \"123\", \"maxlength\", \"3\", 1, \"form-control\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-2\", \"order-item\"], [1, \"item-info\"], [1, \"item-name\"], [1, \"item-total\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\", \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [1, \"d-block\", \"mt-1\", 3, \"ngClass\"], [1, \"summary-row\", \"d-flex\", \"justify-content-between\", \"mb-2\", \"text-success\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-2\"]],\n        template: function CheckoutComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"h2\");\n            i0.ɵɵtext(2, \"Checkout\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"h5\", 6);\n            i0.ɵɵtext(8, \"Delivery Address\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 7);\n            i0.ɵɵtemplate(10, CheckoutComponent_div_10_Template, 9, 1, \"div\", 8)(11, CheckoutComponent_div_11_Template, 34, 8, \"div\", 9);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 10)(13, \"div\", 5)(14, \"h5\", 6);\n            i0.ɵɵtext(15, \"Payment Method\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(16, \"div\", 7)(17, \"div\", 11)(18, \"div\", 12)(19, \"input\", 13);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_Template_input_ngModelChange_19_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.paymentMethod, $event) || (ctx.paymentMethod = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"label\", 14);\n            i0.ɵɵelement(21, \"i\", 15);\n            i0.ɵɵtext(22, \" Cash on Delivery \");\n            i0.ɵɵelementStart(23, \"small\", 16);\n            i0.ɵɵtext(24, \"Pay when your order arrives\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(25, \"div\", 12)(26, \"input\", 17);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_Template_input_ngModelChange_26_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.paymentMethod, $event) || (ctx.paymentMethod = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"label\", 14);\n            i0.ɵɵelement(28, \"i\", 18);\n            i0.ɵɵtext(29, \" UPI Payment \");\n            i0.ɵɵelementStart(30, \"small\", 16);\n            i0.ɵɵtext(31, \"Pay using UPI apps\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(32, \"div\", 12)(33, \"input\", 19);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_Template_input_ngModelChange_33_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.paymentMethod, $event) || (ctx.paymentMethod = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"label\", 14);\n            i0.ɵɵelement(35, \"i\", 20);\n            i0.ɵɵtext(36, \" Credit/Debit Card \");\n            i0.ɵɵelementStart(37, \"small\", 16);\n            i0.ɵɵtext(38, \"Visa, Mastercard, RuPay\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵtemplate(39, CheckoutComponent_div_39_Template, 7, 1, \"div\", 21)(40, CheckoutComponent_div_40_Template, 19, 0, \"div\", 22);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(41, \"div\", 23)(42, \"div\", 24)(43, \"div\", 5)(44, \"h5\", 6);\n            i0.ɵɵtext(45, \"Order Summary\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(46, \"div\", 7)(47, \"div\", 25);\n            i0.ɵɵtemplate(48, CheckoutComponent_div_48_Template, 8, 3, \"div\", 26);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(49, \"div\", 27)(50, \"div\", 28)(51, \"input\", 29);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function CheckoutComponent_Template_input_ngModelChange_51_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.couponCode, $event) || (ctx.couponCode = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(52, CheckoutComponent_button_52_Template, 2, 1, \"button\", 30)(53, CheckoutComponent_button_53_Template, 2, 0, \"button\", 31);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(54, CheckoutComponent_small_54_Template, 2, 5, \"small\", 32);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(55, \"hr\");\n            i0.ɵɵelementStart(56, \"div\", 33)(57, \"span\");\n            i0.ɵɵtext(58, \"Subtotal:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(59, \"span\");\n            i0.ɵɵtext(60);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(61, \"div\", 33)(62, \"span\");\n            i0.ɵɵtext(63, \"Delivery:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(64, \"span\");\n            i0.ɵɵtext(65);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(66, \"div\", 33)(67, \"span\");\n            i0.ɵɵtext(68, \"Tax:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(69, \"span\");\n            i0.ɵɵtext(70);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(71, CheckoutComponent_div_71_Template, 5, 1, \"div\", 34);\n            i0.ɵɵelement(72, \"hr\");\n            i0.ɵɵelementStart(73, \"div\", 35)(74, \"span\");\n            i0.ɵɵtext(75, \"Total:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(76, \"span\");\n            i0.ɵɵtext(77);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(78, \"div\", 36)(79, \"button\", 37);\n            i0.ɵɵlistener(\"click\", function CheckoutComponent_Template_button_click_79_listener() {\n              return ctx.placeOrder();\n            });\n            i0.ɵɵtemplate(80, CheckoutComponent_span_80_Template, 1, 0, \"span\", 38);\n            i0.ɵɵtext(81);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(82, \"div\", 39)(83, \"small\", 40);\n            i0.ɵɵelement(84, \"i\", 41);\n            i0.ɵɵtext(85, \" Your payment information is secure \");\n            i0.ɵɵelementEnd()()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"ngIf\", ctx.savedAddresses.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.savedAddresses.length === 0 || ctx.showAddressForm);\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.paymentMethod);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.paymentMethod);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.paymentMethod);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.paymentMethod === \"upi\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.paymentMethod === \"card\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngForOf\", ctx.orderItems);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.couponCode);\n            i0.ɵɵproperty(\"disabled\", ctx.couponApplied);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.couponApplied);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.couponApplied);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.couponMessage);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", ctx.subtotal, \"\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", ctx.deliveryFee, \"\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", ctx.tax, \"\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.couponDiscount > 0);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", ctx.total, \"\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.isProcessing || !ctx.paymentMethod);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isProcessing);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isProcessing ? \"Processing...\" : \"Place Order\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i7.NgClass, i7.NgForOf, i7.NgIf, FormsModule, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.CheckboxControlValueAccessor, i8.RadioControlValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.RequiredValidator, i8.NgModel, i8.NgForm],\n        styles: [\".container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);min-height:100vh;padding:2rem 1rem}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.col-md-8[_ngcontent-%COMP%]{flex:0 0 auto;width:66.66666667%}.col-md-4[_ngcontent-%COMP%]{flex:0 0 auto;width:33.33333333%;align-self:flex-start}@media (max-width: 768px){.col-md-8[_ngcontent-%COMP%], .col-md-4[_ngcontent-%COMP%]{width:100%}}.card[_ngcontent-%COMP%]{border:none;border-radius:15px;box-shadow:0 10px 30px #0000001a;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-radius:15px 15px 0 0!important;padding:1.25rem;border:none}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-weight:600;text-shadow:2px 2px 4px rgba(0,0,0,.2)}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:10px;border:2px solid #e9ecef;padding:.75rem 1rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.address-option[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;border:2px solid #e9ecef;border-radius:12px;padding:1rem;background:#fff}.address-option[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 5px 15px #667eea33;transform:translateY(-2px)}.address-option.selected[_ngcontent-%COMP%]{border-color:#667eea;background:linear-gradient(135deg,#667eea1a,#764ba21a)}.saved-addresses[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{pointer-events:none}.col-md-4[_ngcontent-%COMP%]{align-self:flex-start}.order-summary[_ngcontent-%COMP%]{position:sticky;top:20px;max-height:calc(100vh - 40px);overflow-y:auto;z-index:10}.payment-option[_ngcontent-%COMP%]{padding:1rem;border:2px solid #e9ecef;border-radius:12px;margin-bottom:1rem;transition:all .3s ease;background:#fff;cursor:pointer}.payment-option[_ngcontent-%COMP%]:hover{border-color:#667eea;background:linear-gradient(135deg,#667eea0d,#764ba20d);transform:translateY(-2px);box-shadow:0 5px 15px #667eea26}.order-item[_ngcontent-%COMP%]{padding:.75rem 0;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;align-items:center}.order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.total-row[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.25rem;border-radius:12px;margin-top:1rem;font-size:1.25rem;font-weight:700;box-shadow:0 5px 15px #667eea4d}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:10px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease;box-shadow:0 5px 15px #667eea4d}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #667eea66}.btn-outline-secondary[_ngcontent-%COMP%]{border-radius:10px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.btn-outline-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}\"]\n      });\n    }\n  }\n  return CheckoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}